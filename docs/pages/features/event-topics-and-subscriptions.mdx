---
title: Event Topics and Topic-Based Subscriptions
---

Outpost supports the common publish and subscription (Pub/Sub) paradigm to ease adoption and integration into existing systems.

## Event Topics

Optionally define topics using the `TOPICS` environment variable. Topics determine:

- Which topics that destinations can subscribe to
- The topics that can be published to

## Event Topic Subscriptions (Destinations)

Subscriptions are represented by destination resources that define where events will be delivered to when an event is published on a given topic.

Create destinations with the following request, replacing `<TENANT_ID>` and `<API_KEY>`. The `<TYPE>` must be one of the supported [event destination types](#event-destination-types), and the `<CONFIG>` contents will depend on the event destination type.

```sh
curl --location 'localhost:3333/api/v1/<TENANT_ID>/destinations' \
--header 'Content-Type: application/json' \
--header 'Authorization: Bearer <API_KEY>' \
--data '{
 "type": "<TYPE>",
 "topics": ["*"],
 "config": <CONFIG>
}'
```

For example, the following creates a webhook destination that subscribes to all topics (`*`) and delivers published events to the URL `https://example.test/webhooks`:

```sh
curl --location 'localhost:3333/api/v1/<TENANT_ID>/destinations' \
--header 'Content-Type: application/json' \
--header 'Authorization: Bearer <API_KEY>' \
--data '{
  "type": "webhook",
  "topics": ["*"],
  "config": {
    "url": "https://example.test/webhooks"
  }
}'
```

## Event Destination Types

Destinations must be asynchronous and not run any business logic. At release, multiple "Event Gateways" and message buses will be supported.

- Webhooks
- AWS SQS
- RabbitMQ
- Hookdeck Event Gateway

Plans for additional event destination types include:

- GCP Pub/Sub
- Amazon Kinesis
- Azure EventBus
- Amazon EventBridge
- Kafka

See the [roadmap](/docs/references/roadmap) for more information on planned destination types.

## Getting Destination Types

Destinations can be registered either through the tenant-facing portal or with the API. When using the API, you need to build your own UI to capture user input on the destination configuration. Since each destination requires a specific configuration, the `GET /destination-types` endpoint provides a JSON schema for each destination type.

For example, for the `webhook` type:

```json
{
  "type": "webhook",
  "label": "Webhook",
  "description": "Send event via an HTTP POST request to a URL",
  "icon": "<svg />",
  "instructions": "Some *markdown*",
  "remote_setup_url": null,
  "config_fields": [
    {
      "type": "text",
      "label": "URL",
      "description": "The URL to send the event to",
      "pattern": "/((([A-Za-z]{3,9}:(?://)?)(?:[-;:&=+$,w]+@)?[A-Za-z0-9.-]+(:[0-9]+)?|(?:www.|[-;:&=+$,w]+@)[A-Za-z0-9.-]+)((?:/[+~%/.w-_]*)???(?:[-+=&;%@.w_]*)#?(?:[w]*))?)/",
      "required": true
    }
  ],
  "credential_fields": []
}
```

### `config_fields` `Field[]`

Config fields are non-secret values that can be stored and displayed to the user in plain text.

### `credential_fields` `Field[]`

Credential fields are secret values that will be AES encrypted and obfuscated to the user. Some credentials may not be obfuscated; the destination type dictates the obfuscation logic.

### `instructions` `string`

Some destinations will require instructions to configure. For instance, with Pubsub, the user will need to create a service account and grant some permissions to that service account. The value is a markdown string to be rendered with any markdown rendering library. Images will be hosted through the GitHub repository.

### `remote_setup_url`

Some destinations may have Oauth flow or other managed-setup flow that can be triggered with a link. If a `remote_setup_url` is set then the user should be prompted to follow the link to configure the destination.

See the [dashboard design guide](../../guides/dashboard-design.mdx) for recommended UI patterns and wireframes for implementation in your own app.
